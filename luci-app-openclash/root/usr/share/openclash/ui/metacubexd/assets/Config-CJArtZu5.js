import{b as U,A as z,u as R,b7 as H,E as X,f as e,t as o,i as t,ad as x,S as N,b8 as ee,b9 as te,c as K,C as le,g as W,B as S,F as w,x as re,ba as b,h as D,bb as ne,bc as ae,bd as se,be as ie,bf as ce,bg as oe,bh as ue,bi as de,bj as V,bk as ge,bl as he,bm as fe,b6 as ve,n as pe,bn as me,bo as be,bp as q,bq as xe,br as G,bs as $e,bt as _e,bu as Ce,bv as B,bw as L,w as M,$ as Q,K as Z,o as J,p as O,v as Y,l as ke,bx as I,by as ye,bz as we}from"./index-CtVw7BLk.js";import{D as Se}from"./DocumentTitle-D9yyEXNP.js";var De=o("<input type=checkbox>"),Te=o("<input>"),Ne=o("<select>"),Ie=o("<label>"),Pe=o("<option>A"),Ae=o("<option>AAAA"),Fe=o("<option>MX"),Ee=o('<div class="flex flex-col p-4">'),Re=o('<div class="flex flex-col"><form class="flex gap-2 sm:flex-row"><div class="flex items-center gap-2">'),Be=o("<div class=py-2>"),Le=o('<div class="grid grid-cols-3 gap-2"><fieldset class=fieldset></fieldset><fieldset class=fieldset></fieldset><fieldset class=fieldset>'),Me=o('<form class="grid grid-cols-3 gap-2 sm:grid-cols-5">'),Qe=o('<div class="flex flex-col gap-4"><div class="grid grid-cols-3 gap-2"><fieldset class=fieldset></fieldset><fieldset class=fieldset></fieldset><fieldset class=fieldset></fieldset></div><div class="grid grid-cols-2 gap-4 sm:grid-cols-2">'),P=o("<option>"),Ve=o("<fieldset class=fieldset>"),je=o('<div class="flex flex-col gap-2"><div class="flex flex-col"></div><div class="flex flex-col">'),qe=o('<div class="grid grid-cols-1 gap-4 sm:grid-cols-2"><div class="flex flex-col gap-2"><div class="flex flex-col items-center"></div><div class="flex flex-col"></div><div class="flex flex-col"></div></div><div class="flex flex-col gap-2"><div class="flex flex-col items-center">'),Ge=o('<div class="mx-auto flex max-w-screen-md flex-col gap-4">');const E=a=>{const[l,c]=B(a,["class"]);return(()=>{var n=De();return L(n,M({get class(){return Q("toggle",l.class)}},c),!1,!1),n})()},F=a=>{const[l,c]=B(a,["class"]);return(()=>{var n=Te();return L(n,M({get class(){return Q("input min-w-0",l.class)}},c),!1,!1),n})()},T=a=>{const[l,c]=B(a,["class"]);return(()=>{var n=Ne();return L(n,M({get class(){return Q("select",l.class)}},c),!1,!0),t(n,()=>Z(()=>c.children)()),n})()},y=a=>{const[l,c]=B(a,["class"]);return(()=>{var n=Ie();return L(n,M({get class(){return Q("label truncate",l.class)}},c),!1,!0),t(n,()=>Z(()=>c.children)()),n})()},Oe=J({name:O(),type:O()}),Ue=()=>{const[a]=R(),l=te(),c="google.com",{form:n,isSubmitting:$}=K({extend:Y({schema:Oe}),onSubmit:s=>l.get("dns/query",{searchParams:{name:s.name||c,type:s.type}}).json().then(({Answer:m})=>g(m?.map(({data:r})=>r)||[])).catch(m=>ke.error(m.message))}),[u,g]=le([]);return(()=>{var s=Re(),m=s.firstChild,r=m.firstChild;return W(n,m,()=>n),t(m,e(F,{type:"search",name:"name",class:"flex-1",placeholder:c,onInput:i=>{i.target.value||g([])}}),r),t(r,e(T,{name:"type",get children(){return[Pe(),Ae(),Fe()]}}),null),t(r,e(S,{type:"submit",class:"btn-primary",get loading(){return $()},get children(){return a("dnsQuery")}}),null),t(s,e(N,{get when(){return u().length>0},get children(){var i=Ee();return t(i,e(w,{get each(){return u()},children:v=>(()=>{var _=Be();return t(_,v),_})()})),i}}),null),s})()},ze=J({port:I(),"socks-port":I(),"redir-port":I(),"tproxy-port":I(),"mixed-port":I()}),He=({isSingBox:a})=>{const[l]=R(),c=[{label:()=>l("port",{name:"Mixed"}),key:"mixed-port",onChange:r=>void b("mixed-port",Number(r.target.value),s)},{label:()=>l("port",{name:"HTTP"}),key:"port",onChange:r=>void b("port",Number(r.target.value),s)},{label:()=>l("port",{name:"Socks"}),key:"socks-port",onChange:r=>void b("socks-port",Number(r.target.value),s)},{label:()=>l("port",{name:"Redir"}),key:"redir-port",onChange:r=>void b("redir-port",Number(r.target.value),s)},{label:()=>l("port",{name:"TProxy"}),key:"tproxy-port",onChange:r=>void b("tproxy-port",Number(r.target.value),s)}],{form:n,setInitialValues:$,reset:u}=K({extend:Y({schema:ze})}),[g,{refetch:s}]=H(ye);re(()=>{const r=g();r&&($(r),u())});const m=X(()=>{const r=g();return r?.["mode-list"]||r?.modes||["rule","direct","global"]});return(()=>{var r=Qe(),i=r.firstChild,v=i.firstChild,_=v.nextSibling,p=_.nextSibling,h=i.nextSibling;return t(v,e(y,{for:"enable-allow-lan",get children(){return l("allowLan")}}),null),t(v,e(E,{id:"enable-allow-lan",get checked(){return g()?.["allow-lan"]},onChange:d=>void b("allow-lan",d.target.checked,s)}),null),t(_,e(y,{for:"mode",get children(){return l("runningMode")}}),null),t(_,e(T,{id:"mode",onChange:d=>void b("mode",d.target.value,s),get children(){return e(w,{get each(){return m()},children:d=>(()=>{var f=P();return f.value=d,t(f,()=>l(d)??d),D(()=>f.selected=d===g()?.mode),f})()})}}),null),t(p,e(y,{for:"interface-name",get children(){return l("outboundInterfaceName")}}),null),t(p,e(F,{id:"interface-name",get value(){return g()?.["interface-name"]},onChange:d=>void b("interface-name",d.target.value,s)}),null),t(r,e(N,{get when(){return!a()},get children(){return[(()=>{var d=Le(),f=d.firstChild,k=f.nextSibling,j=k.nextSibling;return t(f,e(y,{for:"enable-tun-device",get children(){return l("enableTunDevice")}}),null),t(f,e(E,{id:"enable-tun-device",get checked(){return g()?.tun?.enable},onChange:C=>void b("tun",{enable:C.target.checked},s)}),null),t(k,e(y,{for:"tun-ip-stack",get children(){return l("tunModeStack")}}),null),t(k,e(T,{id:"tun-ip-stack",onChange:C=>void b("tun",{stack:C.target.value},s),get children(){return e(w,{each:["Mixed","gVisor","System","LWIP"],children:C=>(()=>{var A=P();return A.value=C,t(A,C),D(()=>A.selected=g()?.tun?.stack===C),A})()})}}),null),t(j,e(y,{for:"device-name",get children(){return l("tunDeviceName")}}),null),t(j,e(F,{id:"device-name",get value(){return g()?.tun?.device},onChange:C=>void b("tun",{device:C.target.value},s)}),null),d})(),(()=>{var d=Me();return W(n,d,()=>n),t(d,e(w,{each:c,children:f=>(()=>{var k=Ve();return t(k,e(y,{get for(){return f.key},get children(){return f.label()}}),null),t(k,e(F,{get id(){return f.key},get name(){return f.key},type:"number",get placeholder(){return f.label()},get onChange(){return f.onChange}}),null),k})()})),d})()]}}),h),t(h,e(S,{class:"btn-primary",get loading(){return ae()},onClick:ne,get children(){return l("reloadConfig")}}),null),t(h,e(S,{class:"btn-accent",get loading(){return ie()},onClick:se,get children(){return l("flushFakeIP")}}),null),t(h,e(S,{class:"btn-warning",get loading(){return oe()},onClick:ce,get children(){return l("restartCore")}}),null),t(h,e(N,{get when(){return!a()},get children(){return e(S,{class:"btn-secondary",get loading(){return de()},onClick:ue,get children(){return l("updateGEODatabases")}})}}),null),r})()},Xe=()=>{const[a]=R(),l=U(),c=[{label:()=>a("en"),value:V.EN},{label:()=>a("zh"),value:V.ZH},{label:()=>a("ru"),value:V.RU}];return(()=>{var n=qe(),$=n.firstChild,u=$.firstChild,g=u.nextSibling,s=g.nextSibling,m=$.nextSibling,r=m.firstChild;return t(u,e(x,{get children(){return a("useTwemoji")}}),null),t(u,e(E,{get checked(){return he()},onChange:i=>ge(i.target.checked)}),null),t(g,e(x,{get children(){return a("switchLanguage")}}),null),t(g,e(T,{onChange:i=>fe(i.target.value),get children(){return e(w,{each:c,children:i=>(()=>{var v=P();return t(v,()=>i.label()),D(()=>v.selected=ve()===i.value),D(()=>v.value=i.value),v})()})}}),null),t(s,e(x,{get children(){return z()?.url}}),null),t(s,e(S,{class:"btn-info",onClick:()=>{pe(""),l(me.Setup)},get children(){return a("switchEndpoint")}}),null),t(r,e(x,{get children(){return a("autoSwitchTheme")}}),null),t(r,e(E,{get checked(){return q()},onChange:i=>be(i.target.checked)}),null),t(m,e(N,{get when(){return q()},get children(){var i=je(),v=i.firstChild,_=v.nextSibling;return t(v,e(x,{get children(){return a("favDayTheme")}}),null),t(v,e(T,{onChange:p=>xe(p.target.value),get children(){return e(w,{each:G,children:p=>(()=>{var h=P();return h.value=p,t(h,p),D(()=>h.selected=$e()===p),h})()})}}),null),t(_,e(x,{get children(){return a("favNightTheme")}}),null),t(_,e(T,{onChange:p=>_e(p.target.value),get children(){return e(w,{each:G,children:p=>(()=>{var h=P();return h.value=p,t(h,p),D(()=>h.selected=Ce()===p),h})()})}}),null),i}}),null),n})()},Ze=()=>{const a=U();if(!z())return a("/setup",{replace:!0}),null;const[l]=R(),c="v1.188.1",[n]=H(we,{initialValue:""}),$=X(()=>n()?.includes("sing-box")||!1);return[e(Se,{get children(){return l("config")}}),(()=>{var u=Ge();return t(u,e(N,{get when(){return!$()},get children(){return[e(x,{withDivider:!0,get children(){return l("dnsQuery")}}),e(Ue,{})]}}),null),t(u,e(x,{withDivider:!0,get children(){return l("coreConfig")}}),null),t(u,e(He,{isSingBox:$}),null),t(u,e(x,{withDivider:!0,get children(){return l("xdConfig")}}),null),t(u,e(Xe,{}),null),t(u,e(x,{withDivider:!0,get children(){return l("version")}}),null),t(u,e(N,{get when(){return!n.loading},get children(){return e(ee,{frontendVersion:c,backendVersion:n})}}),null),u})()]};export{Ze as default};
